(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5797],{1887:function(e,s,l){Promise.resolve().then(l.bind(l,631))},631:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return b}});var c=l(7437),r=l(2265),i=l(5478),n=l(5925),t=l(7028),a=l(2037),d=l(3572),h=l(1167),o=l(3159),j=l(4086),x=l(1866),m=l(1396),u=l.n(m),f=l(1112);function b(){let[e,s]=(0,r.useState)(!1),[l,m]=(0,r.useState)(""),[b,p]=(0,r.useState)(""),[N,g]=(0,r.useState)(""),[v,S]=(0,r.useState)(""),[_,y]=(0,r.useState)(!1),[Z,k]=(0,r.useState)([]),[w,E]=(0,r.useState)([]),[C,O]=(0,r.useState)([]),[J,U]=(0,r.useState)([]),[V,A]=(0,r.useState)(!1),F=(0,f.Z)(e=>e.user),I=JSON.parse(F);(0,r.useEffect)(()=>{{let e=localStorage.getItem("user"),l=JSON.parse(e);if(1==l.role){s(!0);let e=(0,j.IO)((0,j.hJ)(x.Uc,"user"),(0,j.ar)("role","==","4")),l=(0,j.cf)(e,e=>{let c=[];return e.forEach(e=>{c.push({...e.data(),id:e.id}),console.log(e.id," => ",e.data())}),k(c),E(c),console.log(w),s(!1),()=>l()})}else{s(!0);let e=(0,j.IO)((0,j.hJ)(x.Uc,"user"),(0,j.ar)("owner_id","==",l.user_id)),c=(0,j.cf)(e,e=>{let l=[];return e.forEach(e=>{l.push({...e.data(),id:e.id})}),k(l),E(l),console.log(w),s(!1),()=>c()})}}},[]);let B=()=>A(!1),H=async e=>{y(!0),A(!0);let s=(0,j.IO)((0,j.hJ)(x.Uc,"user",e.id,"assign_vehicle")),l=(0,j.cf)(s,async e=>{let s=[];e.forEach(async e=>{await (0,j.IO)((0,j.hJ)(x.Uc,"vehicle"),(0,j.ar)("id","==",e.id));let l=e.id,c=(0,j.cf)((0,j.hJ)(x.Uc,"vehicle"),e=>{let c=[];e.forEach(e=>{e.id==l&&c.push(e.data())}),s.push(...c),O(s),U(s),console.log(s)});return console.log(s),()=>c()}),y(!1)});return()=>l()};return(0,c.jsxs)(c.Fragment,{children:[e?(0,c.jsx)("div",{className:"loading"}):(0,c.jsx)("span",{}),(0,c.jsxs)("div",{className:"wrapper",children:[(0,c.jsx)(i.default,{}),(0,c.jsx)(n.default,{}),(0,c.jsx)(a.x7,{}),(0,c.jsxs)(h.Z,{size:"lg",show:V,onHide:B,children:[(0,c.jsx)(h.Z.Header,{className:"modal-head",closeButton:!0,children:(0,c.jsx)(h.Z.Title,{children:"Assign Vehicle List"})}),(0,c.jsxs)(h.Z.Body,{children:[_?(0,c.jsx)("div",{className:"loading"}):(0,c.jsx)("span",{}),(0,c.jsxs)("table",{className:"table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"col",children:" Vehicle Name"}),(0,c.jsx)("th",{scope:"col",children:"Vehicle Color"}),(0,c.jsx)("th",{scope:"col",children:"RF Key"}),(0,c.jsx)("th",{scope:"col",children:"Bluetooth Key"})]})}),(0,c.jsx)("tbody",{children:C.map((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name}),(0,c.jsx)("td",{children:e.vehicle_color}),(0,c.jsx)("td",{children:e.vehicle_id}),(0,c.jsx)("td",{children:e.bluetooth_key})]},e.id))})]})]}),(0,c.jsx)(h.Z.Footer,{children:(0,c.jsx)(d.Z,{variant:"secondary",onClick:B,children:"Close"})})]}),(0,c.jsxs)("div",{className:"content-wrapper",children:[(0,c.jsxs)("div",{className:"content-header",children:[(0,c.jsx)("div",{className:"container-fluid",children:(0,c.jsxs)("div",{className:"row mb-2",children:[(0,c.jsx)("div",{className:"col-sm-9",children:(0,c.jsxs)("h1",{className:"m-0",children:[" Assign Vehicle To User List",(()=>{if(I&&1==I.role)return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(u(),{href:"/assign/owner/assign_vehicle_user.html",className:"btn btn-success ml-3 mt-3",children:"Assign Vehicle To User"})})})()]})}),(0,c.jsx)("div",{className:"col-sm-3",children:(0,c.jsxs)("ol",{className:"breadcrumb float-sm-right",children:[(0,c.jsx)("li",{className:"breadcrumb-item",children:(0,c.jsx)("a",{href:"#",children:"Home"})}),(0,c.jsx)("li",{className:"breadcrumb-item active",children:"Vehicles"})]})})]})}),(0,c.jsx)("hr",{})]}),(0,c.jsx)("div",{className:"container-fluid",children:(0,c.jsxs)("table",{className:"table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"col",children:"Name"}),(0,c.jsx)("th",{scope:"col",children:"Email"}),(0,c.jsx)("th",{scope:"col",children:"Mobile"}),(0,c.jsx)("th",{scope:"col",children:"Assign Vehicle"})]})}),(0,c.jsx)("tbody",{children:w.map((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name}),(0,c.jsx)("td",{children:e.email}),(0,c.jsx)("td",{children:e.mobile}),(0,c.jsx)("td",{children:(0,c.jsx)(d.Z,{className:"btn btn-dark ml-3 text-light",variant:"primary",onClick:()=>H(e),children:(0,c.jsx)(o.dSq,{})})})]},e.id))})]})})]}),(0,c.jsx)("hr",{}),(0,c.jsx)(t.Z,{})]})]})}},7028:function(e,s,l){"use strict";l.d(s,{Z:function(){return n}});var c=l(7437);l(2265);var r=l(8475),i=l.n(r);function n(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("footer",{className:"main-footer",children:[(0,c.jsxs)("strong",{children:["Copyright \xa9 2023 ",(0,c.jsx)("a",{href:"#"}),"."]}),"All rights reserved.",(0,c.jsx)("div",{className:"float-right d-none d-sm-inline-block"})]}),(0,c.jsx)(i(),{src:"../js/jquery.min.js"}),(0,c.jsx)(i(),{src:"../js/bootstrap.bundle.min.js"}),(0,c.jsx)(i(),{src:"../js/adminlte.js"}),(0,c.jsx)(i(),{src:"../js/Chart.min.js"}),(0,c.jsx)(i(),{src:"../js/summernote-bs4.min.js"}),(0,c.jsx)(i(),{src:"../js/demo.js"}),(0,c.jsx)(i(),{src:"../js/dashboard3.js"})]})}}},function(e){e.O(0,[2420,4358,6220,8373,1396,5490,8344,9891,2971,2472,1744],function(){return e(e.s=1887)}),_N_E=e.O()}]);